{"version":3,"file":"favorites-page.js","sources":["../src/js/pages/favorites.js"],"sourcesContent":["import { EXERCISES_PAGE_SIZE } from '../constants';\nimport { renderExercisesList } from '../renderers/exercises-list';\nimport { renderPagination } from '../renderers/pagination';\nimport { getStoredExercises } from '../services/storage';\nimport { loadHeader } from '../services/header.js';\nimport { getQuote } from '../services/api';\n\nconst cardInfoElement = document.querySelector(\".card-info-container\");\nlet page = 1;\nlet favorites = getStoredExercises();\n\nfunction handlePageChange(newPage) {\n  page = newPage;\n  renderFavoritesList();\n}\n\nfunction handleFavoriteDelete(exerciseId) {\n  favorites = favorites.filter(exercise => exercise._id !== exerciseId);\n  renderFavoritesList();\n}\n\nfunction renderFavoritesList() {\n  const totalPages = Math.ceil(favorites.length / EXERCISES_PAGE_SIZE);\n\n  if (page > totalPages) {\n    // if the page exceeds the total pages, reset to the last page\n    // if totalPages is 0, set page to 1\n    page = totalPages || 1;\n  }\n\n  const start = (page - 1) * EXERCISES_PAGE_SIZE;\n  const end = page * EXERCISES_PAGE_SIZE;\n\n  const exercisesToRender = favorites.slice(start, end);\n\n  renderExercisesList(\n    exercisesToRender,\n    \"It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.\",\n    { favorites: true, onFavoriteDelete: handleFavoriteDelete }\n  );\n\n  if (totalPages > 1) {\n    renderPagination(page, totalPages, handlePageChange);\n  }\n}\n\nfunction compareDates(date1, date2) {\n  return (!date1 || !date2) ? false : date1.day === date2.day && date1.month === date2.month && date1.year === date2.year;\n}\n\nfunction renderQuoteToDOM({author, quote}) {\n    cardInfoElement.insertAdjacentHTML('beforeend', \n      `<p class=\"card-description\">${quote}</p>\n       <p class=\"card-author\">${author}</p>`);\n}\n\nexport async function renderQuote() {\n  const savedDate = JSON.parse(localStorage.getItem(\"favourites-today-date\"));\n  const today = new Date();\n  const savedQuote = JSON.parse(localStorage.getItem(\"favourites-today-quote\"));\n\n  if (savedQuote && compareDates(savedDate, today)) {\n    renderQuoteToDOM(savedQuote);\n  } else {\n    const {author, quote} = await getQuote();\n    localStorage.setItem(\"favourites-today-date\", JSON.stringify(today));\n    localStorage.setItem(\"favourites-today-quote\", JSON.stringify({author, quote}));\n    renderQuoteToDOM(savedQuote);\n  }\n\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  renderFavoritesList();\n  loadHeader();\n  renderQuote();\n});\n"],"names":["cardInfoElement","page","favorites","getStoredExercises","handlePageChange","newPage","renderFavoritesList","handleFavoriteDelete","exerciseId","exercise","totalPages","EXERCISES_PAGE_SIZE","start","end","exercisesToRender","renderExercisesList","renderPagination","compareDates","date1","date2","renderQuoteToDOM","author","quote","renderQuote","savedDate","today","savedQuote","getQuote","loadHeader"],"mappings":"iHAOA,MAAMA,EAAkB,SAAS,cAAc,sBAAsB,EACrE,IAAIC,EAAO,EACPC,EAAYC,EAAkB,EAElC,SAASC,EAAiBC,EAAS,CACjCJ,EAAOI,EACPC,GACF,CAEA,SAASC,EAAqBC,EAAY,CACxCN,EAAYA,EAAU,OAAOO,GAAYA,EAAS,MAAQD,CAAU,EACpEF,GACF,CAEA,SAASA,GAAsB,CAC7B,MAAMI,EAAa,KAAK,KAAKR,EAAU,OAASS,CAAmB,EAE/DV,EAAOS,IAGTT,EAAOS,GAAc,GAGvB,MAAME,GAASX,EAAO,GAAKU,EACrBE,EAAMZ,EAAOU,EAEbG,EAAoBZ,EAAU,MAAMU,EAAOC,CAAG,EAEpDE,EACED,EACA,gLACA,CAAE,UAAW,GAAM,iBAAkBP,CAAsB,CAC/D,EAEMG,EAAa,GACfM,EAAiBf,EAAMS,EAAYN,CAAgB,CAEvD,CAEA,SAASa,EAAaC,EAAOC,EAAO,CAClC,MAAQ,CAACD,GAAS,CAACC,EAAS,GAAQD,EAAM,MAAQC,EAAM,KAAOD,EAAM,QAAUC,EAAM,OAASD,EAAM,OAASC,EAAM,IACrH,CAEA,SAASC,EAAiB,CAAC,OAAAC,EAAQ,MAAAC,CAAK,EAAG,CACvCtB,EAAgB,mBAAmB,YACjC,+BAA+BsB,CAAK;AAAA,gCACVD,CAAM,MAAM,CAC5C,CAEO,eAAeE,GAAc,CAClC,MAAMC,EAAY,KAAK,MAAM,aAAa,QAAQ,uBAAuB,CAAC,EACpEC,EAAQ,IAAI,KACZC,EAAa,KAAK,MAAM,aAAa,QAAQ,wBAAwB,CAAC,EAE5E,GAAIA,GAAcT,EAAaO,EAAWC,CAAK,EAC7CL,EAAiBM,CAAU,MACtB,CACL,KAAM,CAAC,OAAAL,EAAQ,MAAAC,CAAK,EAAI,MAAMK,EAAQ,EACtC,aAAa,QAAQ,wBAAyB,KAAK,UAAUF,CAAK,CAAC,EACnE,aAAa,QAAQ,yBAA0B,KAAK,UAAU,CAAC,OAAAJ,EAAQ,MAAAC,CAAK,CAAC,CAAC,EAC9EF,EAAiBM,CAAU,CAC5B,CAEH,CAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDpB,IACAsB,IACAL,GACF,CAAC"}