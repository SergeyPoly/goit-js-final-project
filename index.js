import{E as v,r as P,a as p,S as o,l as I}from"./assets/pagination-Dxs8xDKu.js";import{i as C,a as S}from"./assets/vendor-CLZFq-H_.js";function b(e,t){C.show({icon:"fa-solid fa-circle-exclamation",iconColor:"white",message:e,messageColor:"white",position:"topRight",timeout:4e3,color:"#EF4040",maxWidth:"500px"})}function N(e){b(e)}S.defaults.baseURL="https://your-energy.b.goit.study/api";function T(e){var t,s;N(((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||`An error occurred: ${e.message}, please try again later!`)}async function L(e,...t){try{const{data:s}=await S[e](...t);return s}catch(s){return T(s),null}}function F(){return L("get","/quote")}function _(e,t=1,s=12){return L("get","/filters",{params:{filter:e,page:t,limit:s}})}function q(e,t,s=1,a=v){const{bodypart:n,muscles:E,equipment:w}=e;return L("get","/exercises",{params:{bodypart:n,muscles:E,equipment:w,keyword:t,page:s,limit:a}})}const B=document.querySelector(".quote-container");function R(){const e=new Date;return{day:e.getDate(),month:e.getMonth(),year:e.getFullYear()}}function U(e,t){return!e||!t?!1:e.day===t.day&&e.month===t.month&&e.year===t.year}function f({author:e,quote:t}){B.insertAdjacentHTML("beforeend",`
    <p class="quote-text">${t}</p>
    <p class="quote-author">${e}</p>
  `)}async function M(){const e=JSON.parse(localStorage.getItem("today-date")),t=R(),s=JSON.parse(localStorage.getItem("today-quote"));if(U(e,t)&&s)f(s);else{const{author:a,quote:n}=await F();localStorage.setItem("today-date",JSON.stringify(t)),localStorage.setItem("today-quote",JSON.stringify({author:a,quote:n})),f({author:a,quote:n})}}const x=e=>e==="Body parts"?"bodypart":e.replace(/\s/g,"").toLowerCase(),O=e=>{const{name:t,imgURL:s,filter:a}=e;return`
    <li class="exercises-content__item" data-filter="${x(a)}" data-exercise="${t.toLowerCase()}">
      <img
        src="${s}"
        alt="Abs"
        class="exercises-content__image"
      />

      <div class="exercises-content__text">
        <h3 class="exercises-content__title">${t}</h3>
        <p class="exercises-content__description">${a}</p>
      </div>
    </li>
  `},A=(e,t)=>{let s="";return e.length?e.forEach(a=>{s+=O(a)}):s=`<p class="no-exercises-message">${t}</p>`,s},i={exercisesContent:document.querySelector(".exercises-content"),exercisesList:document.querySelector(".exercises-list-wrapper"),filterBlock:document.querySelector(".exercises-filter__filters"),filterBtns:document.querySelectorAll(".filter-btn"),filterUnderline:document.querySelector(".filter-underline"),exercisesTitle:document.querySelector(".exercises-header-wrapper .section-title"),breadcrumbs:document.querySelector(".exercises-header__breadcrumbs"),breadcrumbsText:document.querySelector(".breadcrumbs-exercises"),exercisesSearch:document.querySelector(".exercises-filter__search"),exercisesSearchInput:document.querySelector(".exercises-filter__search .search-input"),exercisesLoader:document.querySelector(".exercises-loader"),clearInputBtn:document.querySelector(".search-button.clear-icon")},r={currentFilter:null,currentPage:1,currentLimit:9,totalPages:null,exerciseName:null,exerciseSearch:""},d={setNewParams:e=>{const t=`${window.location.pathname}?${e.toString()}`;history.pushState(null,"",t)},getParams:()=>new URLSearchParams(window.location.search),getExerciseNameFromParams:e=>e.get("bodypart")??e.get("muscles")??e.get("equipment")??null},c={showExercisesList:()=>{i.breadcrumbs.classList.remove("visually-hidden"),i.exercisesSearch.classList.remove("visually-hidden"),i.exercisesTitle.classList.add("cursor-pointer")},hideExercisesList:()=>{i.breadcrumbs.classList.add("visually-hidden"),i.exercisesSearch.classList.add("visually-hidden"),i.exercisesTitle.classList.remove("cursor-pointer")},updateBreadcrumbs:e=>{i.breadcrumbsText.textContent=e},clearContent:()=>{i.exercisesContent.innerHTML="",i.exercisesList.innerHTML=""},moveFilterUnderline:e=>{const t=i.filterBlock.getBoundingClientRect(),s=e.getBoundingClientRect(),a=s.left-t.left,n=s.width;i.filterUnderline.style.left=`${a}px`,i.filterUnderline.style.width=`${n}px`},setActiveFilter:e=>{i.filterBtns.forEach(t=>t.classList.remove("active")),e.classList.add("active"),c.moveFilterUnderline(e)}},h={calculateLimit:(e,t=!1)=>t?o.LIMITS.EXERCISES_LIST:e>=o.BREAKPOINTS.DESKTOP_LARGE?o.LIMITS.DESKTOP_LARGE:o.LIMITS.DESKTOP,updateLimit:(e=window.innerWidth)=>{const t=h.calculateLimit(e,!!r.exerciseName);return r.currentLimit!==t?(r.currentLimit=t,r.exerciseName?(c.clearContent(),l()):(c.clearContent(),m()),!0):!1}},y=()=>{const e=document.querySelector(".pagination");e&&e.remove()},m=async e=>{try{i.exercisesLoader.classList.remove("visually-hidden"),r.currentPage=e||r.currentPage;const{results:t,totalPages:s}=await _(r.currentFilter,r.currentPage,r.currentLimit),a=A(t,"Oops! No exercises found");i.exercisesLoader.classList.add("visually-hidden"),i.exercisesContent.innerHTML=a,r.totalPages=s,r.totalPages>1?p(r.currentPage,r.totalPages,n=>{m(n)},".exercises-content-wrapper"):y()}catch(t){console.error("Error rendering filters:",t),i.exercisesLoader.classList.add("visually-hidden"),i.exercisesContent.innerHTML='<p class="content-error">Error loading filters.<br>Please try again.</p>'}},l=async e=>{try{i.exercisesLoader.classList.remove("visually-hidden"),r.currentPage=e||r.currentPage;const{results:t,totalPages:s}=await q({[x(r.currentFilter)]:r.exerciseName},r.exerciseSearch,r.currentPage,r.currentLimit);P(t,"Oops! No exercises found"),i.exercisesLoader.classList.add("visually-hidden"),r.totalPages=s,r.totalPages>1?p(r.currentPage,r.totalPages,a=>{l(a)},".exercises-content-wrapper"):y()}catch(t){console.error("Error rendering exercises:",t),i.exercisesLoader.classList.add("visually-hidden"),i.exercisesList.innerHTML='<p class="content-error">Error loading exercises.<br>Please try again.</p>'}},$=async(e,t)=>{e.preventDefault(),c.setActiveFilter(t),r.currentFilter=t.textContent,g(),r.exerciseName&&(c.hideExercisesList(),r.exerciseName=null,c.clearContent()),r.currentPage=1,await m()},D=async e=>{const t=e.target.closest(".exercises-content__item");if(t){r.exerciseName=t.dataset.exercise;const s=t.dataset.filter,a=new URLSearchParams;a.set("filter",r.currentFilter),a.set(s,r.exerciseName),d.setNewParams(a),c.updateBreadcrumbs(r.exerciseName),c.showExercisesList(),r.currentPage=1,r.currentLimit=o.LIMITS.EXERCISES_LIST,c.clearContent(),await l()}},k=async()=>{c.hideExercisesList(),g(),r.currentPage=1,r.exerciseName=null,h.updateLimit(),c.clearContent(),await m()},H=()=>{h.updateLimit()},g=()=>{i.exercisesSearchInput.value="",r.exerciseSearch="";const e=new URLSearchParams;e.set("filter",r.currentFilter),r.exerciseName&&e.set(x(r.currentFilter),r.exerciseName),d.setNewParams(e),i.clearInputBtn.classList.add("visually-hidden")};window.addEventListener("resize",H);i.filterBtns.forEach(e=>{e.addEventListener("click",t=>$(t,e))});i.exercisesContent.addEventListener("click",D);i.exercisesTitle.addEventListener("click",k);i.clearInputBtn.addEventListener("click",()=>{g(),l()});const u={timers:new Map,debounce:(e,t,s="default")=>(...a)=>{u.timers.has(s)&&clearTimeout(u.timers.get(s));const n=setTimeout(()=>{e(...a),u.timers.delete(s)},t);u.timers.set(s,n)}},X=u.debounce(async()=>{r.exerciseName&&(r.currentPage=1,c.clearContent(),await l())},500,"search");i.exercisesSearchInput.addEventListener("input",e=>{r.exerciseSearch=e.target.value.trim().toLowerCase();const t=new URLSearchParams;t.set("filter",r.currentFilter),r.exerciseName&&t.set(x(r.currentFilter),r.exerciseName),r.exerciseSearch&&t.set("keyword",r.exerciseSearch),d.setNewParams(t),r.exerciseSearch===""?i.clearInputBtn.classList.add("visually-hidden"):i.clearInputBtn.classList.remove("visually-hidden"),X()});const G=()=>{const e=d.getParams();r.currentFilter=e.get("filter")??o.DEFAULT_FILTER,r.exerciseName=d.getExerciseNameFromParams(e),r.exerciseSearch=e.get("keyword")??"",i.exercisesSearchInput.value=r.exerciseSearch,r.exerciseSearch?i.clearInputBtn.classList.remove("visually-hidden"):i.clearInputBtn.classList.add("visually-hidden");let t=null;for(const s of i.filterBtns)if(s.textContent.trim()===r.currentFilter){t=s,s.classList.add("active");break}if(t&&c.moveFilterUnderline(t),h.updateLimit(),r.exerciseName){c.updateBreadcrumbs(r.exerciseName),c.showExercisesList(),r.currentLimit=o.LIMITS.EXERCISES_LIST,l();return}m()};G();const J=()=>{I(),M()};document.addEventListener("DOMContentLoaded",()=>{J()});
//# sourceMappingURL=index.js.map
