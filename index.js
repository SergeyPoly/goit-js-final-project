import{g as y,S as o,a as w,r as v,b as p,c as E,l as P}from"./assets/pagination-CXrj28aT.js";import"./assets/vendor-D9ezOI0e.js";const I=document.querySelector(".quote-container");function b(){const e=new Date;return{day:e.getDate(),month:e.getMonth(),year:e.getFullYear()}}function N(e,r){return!e||!r?!1:e.day===r.day&&e.month===r.month&&e.year===r.year}function g({author:e,quote:r}){I.insertAdjacentHTML("beforeend",`
    <p class="quote-text">${r}</p>
    <p class="quote-author">${e}</p>
  `)}async function C(){const e=JSON.parse(localStorage.getItem("today-date")),r=b(),i=JSON.parse(localStorage.getItem("today-quote"));if(N(e,r)&&i)g(i);else{const{author:a,quote:c}=await y();localStorage.setItem("today-date",JSON.stringify(r)),localStorage.setItem("today-quote",JSON.stringify({author:a,quote:c})),g({author:a,quote:c})}}const x=e=>e==="Body parts"?"bodypart":e.replace(/\s/g,"").toLowerCase(),T=e=>{const{name:r,imgURL:i,filter:a}=e;return`
    <li class="exercises-content__item" data-filter="${x(a)}" data-exercise="${r.toLowerCase()}">
      <img
        src="${i}"
        alt="Abs"
        class="exercises-content__image"
      />

      <div class="exercises-content__text">
        <h3 class="exercises-content__title">${r}</h3>
        <p class="exercises-content__description">${a}</p>
      </div>
    </li>
  `},F=(e,r)=>{let i="";return e.length?e.forEach(a=>{i+=T(a)}):i=`<p class="no-exercises-message">${r}</p>`,i},s={exercisesContent:document.querySelector(".exercises-content"),exercisesList:document.querySelector(".exercises-list-wrapper"),filterBlock:document.querySelector(".exercises-filter__filters"),filterBtns:document.querySelectorAll(".filter-btn"),filterUnderline:document.querySelector(".filter-underline"),exercisesTitle:document.querySelector(".exercises-header-wrapper .section-title"),breadcrumbs:document.querySelector(".exercises-header__breadcrumbs"),breadcrumbsText:document.querySelector(".breadcrumbs-exercises"),exercisesSearch:document.querySelector(".exercises-filter__search"),exercisesSearchInput:document.querySelector(".exercises-filter__search .search-input"),exercisesLoader:document.querySelector(".exercises-loader"),clearInputBtn:document.querySelector(".search-button.clear-icon")},t={currentFilter:null,currentPage:1,currentLimit:9,totalPages:null,exerciseName:null,exerciseSearch:""},u={setNewParams:e=>{const r=`${window.location.pathname}?${e.toString()}`;history.pushState(null,"",r)},getParams:()=>new URLSearchParams(window.location.search),getExerciseNameFromParams:e=>e.get("bodypart")??e.get("muscles")??e.get("equipment")??null},n={showExercisesList:()=>{s.breadcrumbs.classList.remove("visually-hidden"),s.exercisesSearch.classList.remove("visually-hidden"),s.exercisesTitle.classList.add("cursor-pointer")},hideExercisesList:()=>{s.breadcrumbs.classList.add("visually-hidden"),s.exercisesSearch.classList.add("visually-hidden"),s.exercisesTitle.classList.remove("cursor-pointer")},updateBreadcrumbs:e=>{s.breadcrumbsText.textContent=e},clearContent:()=>{s.exercisesContent.innerHTML="",s.exercisesList.innerHTML=""},moveFilterUnderline:e=>{const r=s.filterBlock.getBoundingClientRect(),i=e.getBoundingClientRect(),a=i.left-r.left,c=i.width;s.filterUnderline.style.left=`${a}px`,s.filterUnderline.style.width=`${c}px`},setActiveFilter:e=>{s.filterBtns.forEach(r=>r.classList.remove("active")),e.classList.add("active"),n.moveFilterUnderline(e)}},L={calculateLimit:(e,r=!1)=>r?o.LIMITS.EXERCISES_LIST:e>=o.BREAKPOINTS.DESKTOP_LARGE?o.LIMITS.DESKTOP_LARGE:o.LIMITS.DESKTOP,updateLimit:(e=window.innerWidth)=>{const r=L.calculateLimit(e,!!t.exerciseName);return t.currentLimit!==r?(t.currentLimit=r,t.exerciseName?(n.clearContent(),l()):(n.clearContent(),m()),!0):!1}},S=()=>{const e=document.querySelector(".pagination");e&&e.remove()},m=async e=>{try{s.exercisesLoader.classList.remove("visually-hidden"),t.currentPage=e||t.currentPage;const{results:r,totalPages:i}=await E(t.currentFilter,t.currentPage,t.currentLimit),a=F(r,"Oops! No exercises found");s.exercisesLoader.classList.add("visually-hidden"),s.exercisesContent.innerHTML=a,t.totalPages=i,t.totalPages>1?p(t.currentPage,t.totalPages,c=>{m(c)},".exercises-content-wrapper"):S()}catch(r){console.error("Error rendering filters:",r),s.exercisesLoader.classList.add("visually-hidden"),s.exercisesContent.innerHTML='<p class="content-error">Error loading filters.<br>Please try again.</p>'}},l=async e=>{try{s.exercisesLoader.classList.remove("visually-hidden"),t.currentPage=e||t.currentPage;const{results:r,totalPages:i}=await w({[x(t.currentFilter)]:t.exerciseName},t.exerciseSearch,t.currentPage,t.currentLimit);v(r,"Oops! No exercises found"),s.exercisesLoader.classList.add("visually-hidden"),t.totalPages=i,t.totalPages>1?p(t.currentPage,t.totalPages,a=>{l(a)},".exercises-content-wrapper"):S()}catch(r){console.error("Error rendering exercises:",r),s.exercisesLoader.classList.add("visually-hidden"),s.exercisesList.innerHTML='<p class="content-error">Error loading exercises.<br>Please try again.</p>'}},_=async(e,r)=>{e.preventDefault(),n.setActiveFilter(r),t.currentFilter=r.textContent,h(),t.exerciseName&&(n.hideExercisesList(),t.exerciseName=null,n.clearContent()),t.currentPage=1,await m()},q=async e=>{const r=e.target.closest(".exercises-content__item");if(r){t.exerciseName=r.dataset.exercise;const i=r.dataset.filter,a=new URLSearchParams;a.set("filter",t.currentFilter),a.set(i,t.exerciseName),u.setNewParams(a),n.updateBreadcrumbs(t.exerciseName),n.showExercisesList(),t.currentPage=1,t.currentLimit=o.LIMITS.EXERCISES_LIST,n.clearContent(),await l()}},B=async()=>{n.hideExercisesList(),h(),t.currentPage=1,t.exerciseName=null,L.updateLimit(),n.clearContent(),await m()},R=()=>{L.updateLimit()},h=()=>{s.exercisesSearchInput.value="",t.exerciseSearch="";const e=new URLSearchParams;e.set("filter",t.currentFilter),t.exerciseName&&e.set(x(t.currentFilter),t.exerciseName),u.setNewParams(e),s.clearInputBtn.classList.add("visually-hidden")};window.addEventListener("resize",R);s.filterBtns.forEach(e=>{e.addEventListener("click",r=>_(r,e))});s.exercisesContent.addEventListener("click",q);s.exercisesTitle.addEventListener("click",B);s.clearInputBtn.addEventListener("click",()=>{h(),l()});const d={timers:new Map,debounce:(e,r,i="default")=>(...a)=>{d.timers.has(i)&&clearTimeout(d.timers.get(i));const c=setTimeout(()=>{e(...a),d.timers.delete(i)},r);d.timers.set(i,c)}},U=d.debounce(async()=>{t.exerciseName&&(t.currentPage=1,n.clearContent(),await l())},500,"search");s.exercisesSearchInput.addEventListener("input",e=>{t.exerciseSearch=e.target.value.trim().toLowerCase();const r=new URLSearchParams;r.set("filter",t.currentFilter),t.exerciseName&&r.set(x(t.currentFilter),t.exerciseName),t.exerciseSearch&&r.set("keyword",t.exerciseSearch),u.setNewParams(r),t.exerciseSearch===""?s.clearInputBtn.classList.add("visually-hidden"):s.clearInputBtn.classList.remove("visually-hidden"),U()});const O=()=>{const e=u.getParams();t.currentFilter=e.get("filter")??o.DEFAULT_FILTER,t.exerciseName=u.getExerciseNameFromParams(e),t.exerciseSearch=e.get("keyword")??"",s.exercisesSearchInput.value=t.exerciseSearch,t.exerciseSearch?s.clearInputBtn.classList.remove("visually-hidden"):s.clearInputBtn.classList.add("visually-hidden");let r=null;for(const i of s.filterBtns)if(i.textContent.trim()===t.currentFilter){r=i,i.classList.add("active");break}if(r&&n.moveFilterUnderline(r),L.updateLimit(),t.exerciseName){n.updateBreadcrumbs(t.exerciseName),n.showExercisesList(),t.currentLimit=o.LIMITS.EXERCISES_LIST,l();return}m()};O();function M(){const e=document.querySelector(".footer-form"),r=e?.querySelector(".footer-input");!e||!r||e.addEventListener("submit",async function(i){i.preventDefault();const a=r.value.trim();if(!/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(a)){alert("Please enter a valid email address.");return}try{if(!(await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})})).ok)throw new Error("Network error");alert("Subscription successful! Thank you."),e.reset()}catch(f){console.error("Subscription failed:",f),alert("Something went wrong. Please try again later.")}})}const k=()=>{P(),C(),M()};document.addEventListener("DOMContentLoaded",()=>{k()});
//# sourceMappingURL=index.js.map
